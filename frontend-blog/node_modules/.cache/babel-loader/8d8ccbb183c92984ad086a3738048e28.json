{"ast":null,"code":"/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.5.1 (2020-10-01)\n */\n(function () {\n  'use strict';\n\n  var Cell = function (initial) {\n    var value = initial;\n\n    var get = function () {\n      return value;\n    };\n\n    var set = function (v) {\n      value = v;\n    };\n\n    return {\n      get: get,\n      set: set\n    };\n  };\n\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var hasProPlugin = function (editor) {\n    if (editor.hasPlugin('powerpaste', true)) {\n      if (typeof window.console !== 'undefined' && window.console.log) {\n        window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n      }\n\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var get = function (clipboard, quirks) {\n    return {\n      clipboard: clipboard,\n      quirks: quirks\n    };\n  };\n\n  var noop = function () {};\n\n  var constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var none = function () {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var eq = function (o) {\n      return o.isNone();\n    };\n\n    var call = function (thunk) {\n      return thunk();\n    };\n\n    var id = function (n) {\n      return n;\n    };\n\n    var me = {\n      fold: function (n, _s) {\n        return n();\n      },\n      is: never,\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function (msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: none,\n      equals: eq,\n      equals_: eq,\n      toArray: function () {\n        return [];\n      },\n      toString: constant('none()')\n    };\n    return me;\n  }();\n\n  var some = function (a) {\n    var constant_a = constant(a);\n\n    var self = function () {\n      return me;\n    };\n\n    var bind = function (f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function (n, s) {\n        return s(a);\n      },\n      is: function (v) {\n        return a === v;\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function (f) {\n        return some(f(a));\n      },\n      each: function (f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function (f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function () {\n        return [a];\n      },\n      toString: function () {\n        return 'some(' + a + ')';\n      },\n      equals: function (o) {\n        return o.is(a);\n      },\n      equals_: function (o, elementEq) {\n        return o.fold(never, function (b) {\n          return elementEq(a, b);\n        });\n      }\n    };\n    return me;\n  };\n\n  var from = function (value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Optional = {\n    some: some,\n    none: none,\n    from: from\n  };\n\n  var isSimpleType = function (type) {\n    return function (value) {\n      return typeof value === type;\n    };\n  };\n\n  var isFunction = isSimpleType('function');\n  var nativeSlice = Array.prototype.slice;\n\n  var map = function (xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var each = function (xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var filter = function (xs, pred) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        r.push(x);\n      }\n    }\n\n    return r;\n  };\n\n  var foldl = function (xs, f, acc) {\n    each(xs, function (x) {\n      acc = f(acc, x);\n    });\n    return acc;\n  };\n\n  var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n    return nativeSlice.call(x);\n  };\n\n  var value = function () {\n    var subject = Cell(Optional.none());\n\n    var clear = function () {\n      return subject.set(Optional.none());\n    };\n\n    var set = function (s) {\n      return subject.set(Optional.some(s));\n    };\n\n    var isSet = function () {\n      return subject.get().isSome();\n    };\n\n    var on = function (f) {\n      return subject.get().each(f);\n    };\n\n    return {\n      clear: clear,\n      set: set,\n      isSet: isSet,\n      on: on\n    };\n  };\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n  var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n  var global$4 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n  var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n    return editor.fire('PastePreProcess', {\n      content: html,\n      internal: internal,\n      wordContent: isWordHtml\n    });\n  };\n\n  var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n    return editor.fire('PastePostProcess', {\n      node: node,\n      internal: internal,\n      wordContent: isWordHtml\n    });\n  };\n\n  var firePastePlainTextToggle = function (editor, state) {\n    return editor.fire('PastePlainTextToggle', {\n      state: state\n    });\n  };\n\n  var firePaste = function (editor, ieFake) {\n    return editor.fire('paste', {\n      ieFake: ieFake\n    });\n  };\n\n  var shouldBlockDrop = function (editor) {\n    return editor.getParam('paste_block_drop', false);\n  };\n\n  var shouldPasteDataImages = function (editor) {\n    return editor.getParam('paste_data_images', false);\n  };\n\n  var shouldFilterDrop = function (editor) {\n    return editor.getParam('paste_filter_drop', true);\n  };\n\n  var getPreProcess = function (editor) {\n    return editor.getParam('paste_preprocess');\n  };\n\n  var getPostProcess = function (editor) {\n    return editor.getParam('paste_postprocess');\n  };\n\n  var getWebkitStyles = function (editor) {\n    return editor.getParam('paste_webkit_styles');\n  };\n\n  var shouldRemoveWebKitStyles = function (editor) {\n    return editor.getParam('paste_remove_styles_if_webkit', true);\n  };\n\n  var shouldMergeFormats = function (editor) {\n    return editor.getParam('paste_merge_formats', true);\n  };\n\n  var isSmartPasteEnabled = function (editor) {\n    return editor.getParam('smart_paste', true);\n  };\n\n  var isPasteAsTextEnabled = function (editor) {\n    return editor.getParam('paste_as_text', false);\n  };\n\n  var getRetainStyleProps = function (editor) {\n    return editor.getParam('paste_retain_style_properties');\n  };\n\n  var getWordValidElements = function (editor) {\n    var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n    return editor.getParam('paste_word_valid_elements', defaultValidElements);\n  };\n\n  var shouldConvertWordFakeLists = function (editor) {\n    return editor.getParam('paste_convert_word_fake_lists', true);\n  };\n\n  var shouldUseDefaultFilters = function (editor) {\n    return editor.getParam('paste_enable_default_filters', true);\n  };\n\n  var getValidate = function (editor) {\n    return editor.getParam('validate');\n  };\n\n  var getAllowHtmlDataUrls = function (editor) {\n    return editor.getParam('allow_html_data_urls', false, 'boolean');\n  };\n\n  var getPasteDataImages = function (editor) {\n    return editor.getParam('paste_data_images', false, 'boolean');\n  };\n\n  var getImagesDataImgFilter = function (editor) {\n    return editor.getParam('images_dataimg_filter');\n  };\n\n  var getImagesReuseFilename = function (editor) {\n    return editor.getParam('images_reuse_filename');\n  };\n\n  var getForcedRootBlock = function (editor) {\n    return editor.getParam('forced_root_block');\n  };\n\n  var getForcedRootBlockAttrs = function (editor) {\n    return editor.getParam('forced_root_block_attrs');\n  };\n\n  var getTabSpaces = function (editor) {\n    return editor.getParam('paste_tab_spaces', 4, 'number');\n  };\n\n  var internalMimeType = 'x-tinymce/html';\n  var internalMark = '<!-- ' + internalMimeType + ' -->';\n\n  var mark = function (html) {\n    return internalMark + html;\n  };\n\n  var unmark = function (html) {\n    return html.replace(internalMark, '');\n  };\n\n  var isMarked = function (html) {\n    return html.indexOf(internalMark) !== -1;\n  };\n\n  var internalHtmlMime = function () {\n    return internalMimeType;\n  };\n\n  var global$5 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n  var global$6 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var isPlainText = function (text) {\n    return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n  };\n\n  var toBRs = function (text) {\n    return text.replace(/\\r?\\n/g, '<br>');\n  };\n\n  var openContainer = function (rootTag, rootAttrs) {\n    var key;\n    var attrs = [];\n    var tag = '<' + rootTag;\n\n    if (typeof rootAttrs === 'object') {\n      for (key in rootAttrs) {\n        if (rootAttrs.hasOwnProperty(key)) {\n          attrs.push(key + '=\"' + global$5.encodeAllRaw(rootAttrs[key]) + '\"');\n        }\n      }\n\n      if (attrs.length) {\n        tag += ' ' + attrs.join(' ');\n      }\n    }\n\n    return tag + '>';\n  };\n\n  var toBlockElements = function (text, rootTag, rootAttrs) {\n    var blocks = text.split(/\\n\\n/);\n    var tagOpen = openContainer(rootTag, rootAttrs);\n    var tagClose = '</' + rootTag + '>';\n    var paragraphs = global$6.map(blocks, function (p) {\n      return p.split(/\\n/).join('<br />');\n    });\n\n    var stitch = function (p) {\n      return tagOpen + p + tagClose;\n    };\n\n    return paragraphs.length === 1 ? paragraphs[0] : global$6.map(paragraphs, stitch).join('');\n  };\n\n  var convert = function (text, rootTag, rootAttrs) {\n    return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n  };\n\n  var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n  var global$8 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n  var nbsp = '\\xA0';\n  var global$9 = tinymce.util.Tools.resolve('tinymce.html.Node');\n  var global$a = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n  function filter$1(content, items) {\n    global$6.each(items, function (v) {\n      if (v.constructor === RegExp) {\n        content = content.replace(v, '');\n      } else {\n        content = content.replace(v[0], v[1]);\n      }\n    });\n    return content;\n  }\n\n  function innerText(html) {\n    var schema = global$a();\n    var domParser = global$7({}, schema);\n    var text = '';\n    var shortEndedElements = schema.getShortEndedElements();\n    var ignoreElements = global$6.makeMap('script noscript style textarea video audio iframe object', ' ');\n    var blockElements = schema.getBlockElements();\n\n    function walk(node) {\n      var name = node.name,\n          currentNode = node;\n\n      if (name === 'br') {\n        text += '\\n';\n        return;\n      }\n\n      if (name === 'wbr') {\n        return;\n      }\n\n      if (shortEndedElements[name]) {\n        text += ' ';\n      }\n\n      if (ignoreElements[name]) {\n        text += ' ';\n        return;\n      }\n\n      if (node.type === 3) {\n        text += node.value;\n      }\n\n      if (!node.shortEnded) {\n        if (node = node.firstChild) {\n          do {\n            walk(node);\n          } while (node = node.next);\n        }\n      }\n\n      if (blockElements[name] && currentNode.next) {\n        text += '\\n';\n\n        if (name === 'p') {\n          text += '\\n';\n        }\n      }\n    }\n\n    html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n    walk(domParser.parse(html));\n    return text;\n  }\n\n  function trimHtml(html) {\n    function trimSpaces(all, s1, s2) {\n      if (!s1 && !s2) {\n        return ' ';\n      }\n\n      return nbsp;\n    }\n\n    html = filter$1(html, [/^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig, /<!--StartFragment-->|<!--EndFragment-->/g, [/( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g, trimSpaces], /<br class=\"Apple-interchange-newline\">/g, /<br>$/i]);\n    return html;\n  }\n\n  function createIdGenerator(prefix) {\n    var count = 0;\n    return function () {\n      return prefix + count++;\n    };\n  }\n\n  function isWordContent(content) {\n    return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n  }\n\n  function isNumericList(text) {\n    var found;\n    var patterns = [/^[IVXLMCD]{1,2}\\.[ \\u00a0]/, /^[ivxlmcd]{1,2}\\.[ \\u00a0]/, /^[a-z]{1,2}[\\.\\)][ \\u00a0]/, /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/, /^[0-9]+\\.[ \\u00a0]/, /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/, /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/];\n    text = text.replace(/^[\\u00a0 ]+/, '');\n    global$6.each(patterns, function (pattern) {\n      if (pattern.test(text)) {\n        found = true;\n        return false;\n      }\n    });\n    return found;\n  }\n\n  function isBulletList(text) {\n    return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n  }\n\n  function convertFakeListsToProperLists(node) {\n    var currentListNode,\n        prevListNode,\n        lastLevel = 1;\n\n    function getText(node) {\n      var txt = '';\n\n      if (node.type === 3) {\n        return node.value;\n      }\n\n      if (node = node.firstChild) {\n        do {\n          txt += getText(node);\n        } while (node = node.next);\n      }\n\n      return txt;\n    }\n\n    function trimListStart(node, regExp) {\n      if (node.type === 3) {\n        if (regExp.test(node.value)) {\n          node.value = node.value.replace(regExp, '');\n          return false;\n        }\n      }\n\n      if (node = node.firstChild) {\n        do {\n          if (!trimListStart(node, regExp)) {\n            return false;\n          }\n        } while (node = node.next);\n      }\n\n      return true;\n    }\n\n    function removeIgnoredNodes(node) {\n      if (node._listIgnore) {\n        node.remove();\n        return;\n      }\n\n      if (node = node.firstChild) {\n        do {\n          removeIgnoredNodes(node);\n        } while (node = node.next);\n      }\n    }\n\n    function convertParagraphToLi(paragraphNode, listName, start) {\n      var level = paragraphNode._listLevel || lastLevel;\n\n      if (level !== lastLevel) {\n        if (level < lastLevel) {\n          if (currentListNode) {\n            currentListNode = currentListNode.parent.parent;\n          }\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n\n      if (!currentListNode || currentListNode.name !== listName) {\n        prevListNode = prevListNode || currentListNode;\n        currentListNode = new global$9(listName, 1);\n\n        if (start > 1) {\n          currentListNode.attr('start', '' + start);\n        }\n\n        paragraphNode.wrap(currentListNode);\n      } else {\n        currentListNode.append(paragraphNode);\n      }\n\n      paragraphNode.name = 'li';\n\n      if (level > lastLevel && prevListNode) {\n        prevListNode.lastChild.append(currentListNode);\n      }\n\n      lastLevel = level;\n      removeIgnoredNodes(paragraphNode);\n      trimListStart(paragraphNode, /^\\u00a0+/);\n      trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n      trimListStart(paragraphNode, /^\\u00a0+/);\n    }\n\n    var elements = [];\n    var child = node.firstChild;\n\n    while (typeof child !== 'undefined' && child !== null) {\n      elements.push(child);\n      child = child.walk();\n\n      if (child !== null) {\n        while (typeof child !== 'undefined' && child.parent !== node) {\n          child = child.walk();\n        }\n      }\n    }\n\n    for (var i = 0; i < elements.length; i++) {\n      node = elements[i];\n\n      if (node.name === 'p' && node.firstChild) {\n        var nodeText = getText(node);\n\n        if (isBulletList(nodeText)) {\n          convertParagraphToLi(node, 'ul');\n          continue;\n        }\n\n        if (isNumericList(nodeText)) {\n          var matches = /([0-9]+)\\./.exec(nodeText);\n          var start = 1;\n\n          if (matches) {\n            start = parseInt(matches[1], 10);\n          }\n\n          convertParagraphToLi(node, 'ol', start);\n          continue;\n        }\n\n        if (node._listLevel) {\n          convertParagraphToLi(node, 'ul', 1);\n          continue;\n        }\n\n        currentListNode = null;\n      } else {\n        prevListNode = currentListNode;\n        currentListNode = null;\n      }\n    }\n  }\n\n  function filterStyles(editor, validStyles, node, styleValue) {\n    var outputStyles = {},\n        matches;\n    var styles = editor.dom.parseStyle(styleValue);\n    global$6.each(styles, function (value, name) {\n      switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n\n          break;\n\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n\n          return;\n\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n\n          break;\n      }\n\n      if (name.indexOf('mso-comment') === 0) {\n        node.remove();\n        return;\n      }\n\n      if (name.indexOf('mso-') === 0) {\n        return;\n      }\n\n      if (getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n        outputStyles[name] = value;\n      }\n    });\n\n    if (/(bold)/i.test(outputStyles['font-weight'])) {\n      delete outputStyles['font-weight'];\n      node.wrap(new global$9('b', 1));\n    }\n\n    if (/(italic)/i.test(outputStyles['font-style'])) {\n      delete outputStyles['font-style'];\n      node.wrap(new global$9('i', 1));\n    }\n\n    outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n\n    if (outputStyles) {\n      return outputStyles;\n    }\n\n    return null;\n  }\n\n  var filterWordContent = function (editor, content) {\n    var validStyles;\n    var retainStyleProperties = getRetainStyleProps(editor);\n\n    if (retainStyleProperties) {\n      validStyles = global$6.makeMap(retainStyleProperties.split(/[, ]/));\n    }\n\n    content = filter$1(content, [/<br class=\"?Apple-interchange-newline\"?>/gi, /<b[^>]+id=\"?docs-internal-[^>]*>/gi, /<!--[\\s\\S]+?-->/gi, /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi, [/<(\\/?)s>/gi, '<$1strike>'], [/&nbsp;/gi, nbsp], [/<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi, function (str, spaces) {\n      return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join(nbsp) : '';\n    }]]);\n    var validElements = getWordValidElements(editor);\n    var schema = global$a({\n      valid_elements: validElements,\n      valid_children: '-li[p]'\n    });\n    global$6.each(schema.elements, function (rule) {\n      if (!rule.attributes.class) {\n        rule.attributes.class = {};\n        rule.attributesOrder.push('class');\n      }\n\n      if (!rule.attributes.style) {\n        rule.attributes.style = {};\n        rule.attributesOrder.push('style');\n      }\n    });\n    var domParser = global$7({}, schema);\n    domParser.addAttributeFilter('style', function (nodes) {\n      var i = nodes.length,\n          node;\n\n      while (i--) {\n        node = nodes[i];\n        node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n\n        if (node.name === 'span' && node.parent && !node.attributes.length) {\n          node.unwrap();\n        }\n      }\n    });\n    domParser.addAttributeFilter('class', function (nodes) {\n      var i = nodes.length,\n          node,\n          className;\n\n      while (i--) {\n        node = nodes[i];\n        className = node.attr('class');\n\n        if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n          node.remove();\n        }\n\n        node.attr('class', null);\n      }\n    });\n    domParser.addNodeFilter('del', function (nodes) {\n      var i = nodes.length;\n\n      while (i--) {\n        nodes[i].remove();\n      }\n    });\n    domParser.addNodeFilter('a', function (nodes) {\n      var i = nodes.length,\n          node,\n          href,\n          name;\n\n      while (i--) {\n        node = nodes[i];\n        href = node.attr('href');\n        name = node.attr('name');\n\n        if (href && href.indexOf('#_msocom_') !== -1) {\n          node.remove();\n          continue;\n        }\n\n        if (href && href.indexOf('file://') === 0) {\n          href = href.split('#')[1];\n\n          if (href) {\n            href = '#' + href;\n          }\n        }\n\n        if (!href && !name) {\n          node.unwrap();\n        } else {\n          if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n            node.unwrap();\n            continue;\n          }\n\n          node.attr({\n            href: href,\n            name: name\n          });\n        }\n      }\n    });\n    var rootNode = domParser.parse(content);\n\n    if (shouldConvertWordFakeLists(editor)) {\n      convertFakeListsToProperLists(rootNode);\n    }\n\n    content = global$8({\n      validate: getValidate(editor)\n    }, schema).serialize(rootNode);\n    return content;\n  };\n\n  var preProcess = function (editor, content) {\n    return shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n  };\n\n  var preProcess$1 = function (editor, html) {\n    var parser = global$7({}, editor.schema);\n    parser.addNodeFilter('meta', function (nodes) {\n      global$6.each(nodes, function (node) {\n        node.remove();\n      });\n    });\n    var fragment = parser.parse(html, {\n      forced_root_block: false,\n      isRootContent: true\n    });\n    return global$8({\n      validate: getValidate(editor)\n    }, editor.schema).serialize(fragment);\n  };\n\n  var processResult = function (content, cancelled) {\n    return {\n      content: content,\n      cancelled: cancelled\n    };\n  };\n\n  var postProcessFilter = function (editor, html, internal, isWordHtml) {\n    var tempBody = editor.dom.create('div', {\n      style: 'display:none'\n    }, html);\n    var postProcessArgs = firePastePostProcess(editor, tempBody, internal, isWordHtml);\n    return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n  };\n\n  var filterContent = function (editor, content, internal, isWordHtml) {\n    var preProcessArgs = firePastePreProcess(editor, content, internal, isWordHtml);\n    var filteredContent = preProcess$1(editor, preProcessArgs.content);\n\n    if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n      return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n    } else {\n      return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n    }\n  };\n\n  var process = function (editor, html, internal) {\n    var isWordHtml = isWordContent(html);\n    var content = isWordHtml ? preProcess(editor, html) : html;\n    return filterContent(editor, content, internal, isWordHtml);\n  };\n\n  var pasteHtml = function (editor, html) {\n    editor.insertContent(html, {\n      merge: shouldMergeFormats(editor),\n      paste: true\n    });\n    return true;\n  };\n\n  var isAbsoluteUrl = function (url) {\n    return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n  };\n\n  var isImageUrl = function (url) {\n    return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n  };\n\n  var createImage = function (editor, url, pasteHtmlFn) {\n    editor.undoManager.extra(function () {\n      pasteHtmlFn(editor, url);\n    }, function () {\n      editor.insertContent('<img src=\"' + url + '\">');\n    });\n    return true;\n  };\n\n  var createLink = function (editor, url, pasteHtmlFn) {\n    editor.undoManager.extra(function () {\n      pasteHtmlFn(editor, url);\n    }, function () {\n      editor.execCommand('mceInsertLink', false, url);\n    });\n    return true;\n  };\n\n  var linkSelection = function (editor, html, pasteHtmlFn) {\n    return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n  };\n\n  var insertImage = function (editor, html, pasteHtmlFn) {\n    return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n  };\n\n  var smartInsertContent = function (editor, html) {\n    global$6.each([linkSelection, insertImage, pasteHtml], function (action) {\n      return action(editor, html, pasteHtml) !== true;\n    });\n  };\n\n  var insertContent = function (editor, html, pasteAsText) {\n    if (pasteAsText || isSmartPasteEnabled(editor) === false) {\n      pasteHtml(editor, html);\n    } else {\n      smartInsertContent(editor, html);\n    }\n  };\n\n  var repeat = function (s, count) {\n    return count <= 0 ? '' : new Array(count + 1).join(s);\n  };\n\n  var isCollapsibleWhitespace = function (c) {\n    return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n  };\n\n  var isNewLineChar = function (c) {\n    return c === '\\n' || c === '\\r';\n  };\n\n  var isNewline = function (text, idx) {\n    return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n  };\n\n  var normalizeWhitespace = function (editor, text) {\n    var tabSpace = repeat(' ', getTabSpaces(editor));\n    var normalizedText = text.replace(/\\t/g, tabSpace);\n    var result = foldl(normalizedText, function (acc, c) {\n      if (isCollapsibleWhitespace(c) || c === nbsp) {\n        if (acc.pcIsSpace || acc.str === '' || acc.str.length === normalizedText.length - 1 || isNewline(normalizedText, acc.str.length + 1)) {\n          return {\n            pcIsSpace: false,\n            str: acc.str + nbsp\n          };\n        } else {\n          return {\n            pcIsSpace: true,\n            str: acc.str + ' '\n          };\n        }\n      } else {\n        return {\n          pcIsSpace: isNewLineChar(c),\n          str: acc.str + c\n        };\n      }\n    }, {\n      pcIsSpace: false,\n      str: ''\n    });\n    return result.str;\n  };\n\n  var doPaste = function (editor, content, internal, pasteAsText) {\n    var args = process(editor, content, internal);\n\n    if (args.cancelled === false) {\n      insertContent(editor, args.content, pasteAsText);\n    }\n  };\n\n  var pasteHtml$1 = function (editor, html, internalFlag) {\n    var internal = internalFlag ? internalFlag : isMarked(html);\n    doPaste(editor, unmark(html), internal, false);\n  };\n\n  var pasteText = function (editor, text) {\n    var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n    var normalizedText = normalizeWhitespace(editor, encodedText);\n    var html = convert(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n    doPaste(editor, html, false, true);\n  };\n\n  var getDataTransferItems = function (dataTransfer) {\n    var items = {};\n    var mceInternalUrlPrefix = 'data:text/mce-internal,';\n\n    if (dataTransfer) {\n      if (dataTransfer.getData) {\n        var legacyText = dataTransfer.getData('Text');\n\n        if (legacyText && legacyText.length > 0) {\n          if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n            items['text/plain'] = legacyText;\n          }\n        }\n      }\n\n      if (dataTransfer.types) {\n        for (var i = 0; i < dataTransfer.types.length; i++) {\n          var contentType = dataTransfer.types[i];\n\n          try {\n            items[contentType] = dataTransfer.getData(contentType);\n          } catch (ex) {\n            items[contentType] = '';\n          }\n        }\n      }\n    }\n\n    return items;\n  };\n\n  var getClipboardContent = function (editor, clipboardEvent) {\n    return getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n  };\n\n  var hasContentType = function (clipboardContent, mimeType) {\n    return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n  };\n\n  var hasHtmlOrText = function (content) {\n    return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n  };\n\n  var parseDataUri = function (uri) {\n    var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n\n    if (matches) {\n      return {\n        type: matches[1],\n        data: decodeURIComponent(matches[2])\n      };\n    } else {\n      return {\n        type: null,\n        data: null\n      };\n    }\n  };\n\n  var isValidDataUriImage = function (editor, imgElm) {\n    var filter = getImagesDataImgFilter(editor);\n    return filter ? filter(imgElm) : true;\n  };\n\n  var extractFilename = function (editor, str) {\n    var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n    return m ? editor.dom.encode(m[1]) : null;\n  };\n\n  var uniqueId = createIdGenerator('mceclip');\n\n  var pasteImage = function (editor, imageItem) {\n    var _a = parseDataUri(imageItem.uri),\n        base64 = _a.data,\n        type = _a.type;\n\n    var id = uniqueId();\n    var name = getImagesReuseFilename(editor) && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n    var img = new Image();\n    img.src = imageItem.uri;\n\n    if (isValidDataUriImage(editor, img)) {\n      var blobCache = editor.editorUpload.blobCache;\n      var blobInfo = void 0;\n      var existingBlobInfo = blobCache.getByData(base64, type);\n\n      if (!existingBlobInfo) {\n        blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n        blobCache.add(blobInfo);\n      } else {\n        blobInfo = existingBlobInfo;\n      }\n\n      pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n    } else {\n      pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n    }\n  };\n\n  var isClipboardEvent = function (event) {\n    return event.type === 'paste';\n  };\n\n  var readBlobsAsDataUris = function (items) {\n    return global$3.all(map(items, function (item) {\n      return new global$3(function (resolve) {\n        var blob = item.getAsFile ? item.getAsFile() : item;\n        var reader = new window.FileReader();\n\n        reader.onload = function () {\n          resolve({\n            blob: blob,\n            uri: reader.result\n          });\n        };\n\n        reader.readAsDataURL(blob);\n      });\n    }));\n  };\n\n  var getImagesFromDataTransfer = function (dataTransfer) {\n    var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n      return item.getAsFile();\n    }) : [];\n    var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n    var images = filter(items.length > 0 ? items : files, function (file) {\n      return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n    });\n    return images;\n  };\n\n  var pasteImageData = function (editor, e, rng) {\n    var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n\n    if (getPasteDataImages(editor) && dataTransfer) {\n      var images = getImagesFromDataTransfer(dataTransfer);\n\n      if (images.length > 0) {\n        e.preventDefault();\n        readBlobsAsDataUris(images).then(function (blobResults) {\n          if (rng) {\n            editor.selection.setRng(rng);\n          }\n\n          each(blobResults, function (result) {\n            pasteImage(editor, result);\n          });\n        });\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  var isBrokenAndroidClipboardEvent = function (e) {\n    var clipboardData = e.clipboardData;\n    return navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n  };\n\n  var isKeyboardPasteEvent = function (e) {\n    return global$4.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n  };\n\n  var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n    var keyboardPasteEvent = value();\n    var keyboardPastePlainTextState;\n    editor.on('keydown', function (e) {\n      function removePasteBinOnKeyUp(e) {\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          pasteBin.remove();\n        }\n      }\n\n      if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n        keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n\n        if (keyboardPastePlainTextState && global$1.webkit && navigator.userAgent.indexOf('Version/') !== -1) {\n          return;\n        }\n\n        e.stopImmediatePropagation();\n        keyboardPasteEvent.set(e);\n        window.setTimeout(function () {\n          keyboardPasteEvent.clear();\n        }, 100);\n\n        if (global$1.ie && keyboardPastePlainTextState) {\n          e.preventDefault();\n          firePaste(editor, true);\n          return;\n        }\n\n        pasteBin.remove();\n        pasteBin.create();\n        editor.once('keyup', removePasteBinOnKeyUp);\n        editor.once('paste', function () {\n          editor.off('keyup', removePasteBinOnKeyUp);\n        });\n      }\n    });\n\n    function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n      var content;\n\n      if (hasContentType(clipboardContent, 'text/html')) {\n        content = clipboardContent['text/html'];\n      } else {\n        content = pasteBin.getHtml();\n        internal = internal ? internal : isMarked(content);\n\n        if (pasteBin.isDefaultContent(content)) {\n          plainTextMode = true;\n        }\n      }\n\n      content = trimHtml(content);\n      pasteBin.remove();\n      var isPlainTextHtml = internal === false && isPlainText(content);\n      var isImage = isImageUrl(content);\n\n      if (!content.length || isPlainTextHtml && !isImage) {\n        plainTextMode = true;\n      }\n\n      if (plainTextMode || isImage) {\n        if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n          content = clipboardContent['text/plain'];\n        } else {\n          content = innerText(content);\n        }\n      }\n\n      if (pasteBin.isDefaultContent(content)) {\n        if (!isKeyBoardPaste) {\n          editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n        }\n\n        return;\n      }\n\n      if (plainTextMode) {\n        pasteText(editor, content);\n      } else {\n        pasteHtml$1(editor, content, internal);\n      }\n    }\n\n    var getLastRng = function () {\n      return pasteBin.getLastRng() || editor.selection.getRng();\n    };\n\n    editor.on('paste', function (e) {\n      var isKeyBoardPaste = keyboardPasteEvent.isSet();\n      var clipboardContent = getClipboardContent(editor, e);\n      var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n      var internal = hasContentType(clipboardContent, internalHtmlMime());\n      keyboardPastePlainTextState = false;\n\n      if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n        pasteBin.remove();\n        return;\n      }\n\n      if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n        pasteBin.remove();\n        return;\n      }\n\n      if (!isKeyBoardPaste) {\n        e.preventDefault();\n      }\n\n      if (global$1.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n        pasteBin.create();\n        editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n          e.stopPropagation();\n        });\n        editor.getDoc().execCommand('Paste', false, null);\n        clipboardContent['text/html'] = pasteBin.getHtml();\n      }\n\n      if (hasContentType(clipboardContent, 'text/html')) {\n        e.preventDefault();\n\n        if (!internal) {\n          internal = isMarked(clipboardContent['text/html']);\n        }\n\n        insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n      } else {\n        global$2.setEditorTimeout(editor, function () {\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        }, 0);\n      }\n    });\n  };\n\n  var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n    registerEventHandlers(editor, pasteBin, pasteFormat);\n    var src;\n    editor.parser.addNodeFilter('img', function (nodes, name, args) {\n      var isPasteInsert = function (args) {\n        return args.data && args.data.paste === true;\n      };\n\n      var remove = function (node) {\n        if (!node.attr('data-mce-object') && src !== global$1.transparentSrc) {\n          node.remove();\n        }\n      };\n\n      var isWebKitFakeUrl = function (src) {\n        return src.indexOf('webkit-fake-url') === 0;\n      };\n\n      var isDataUri = function (src) {\n        return src.indexOf('data:') === 0;\n      };\n\n      if (!getPasteDataImages(editor) && isPasteInsert(args)) {\n        var i = nodes.length;\n\n        while (i--) {\n          src = nodes[i].attr('src');\n\n          if (!src) {\n            continue;\n          }\n\n          if (isWebKitFakeUrl(src)) {\n            remove(nodes[i]);\n          } else if (!getAllowHtmlDataUrls(editor) && isDataUri(src)) {\n            remove(nodes[i]);\n          }\n        }\n      }\n    });\n  };\n\n  var getPasteBinParent = function (editor) {\n    return global$1.ie && editor.inline ? document.body : editor.getBody();\n  };\n\n  var isExternalPasteBin = function (editor) {\n    return getPasteBinParent(editor) !== editor.getBody();\n  };\n\n  var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n    if (isExternalPasteBin(editor)) {\n      editor.dom.bind(pasteBinElm, 'paste keyup', function (_e) {\n        if (!isDefault(editor, pasteBinDefaultContent)) {\n          editor.fire('paste');\n        }\n      });\n    }\n  };\n\n  var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n    var dom = editor.dom,\n        body = editor.getBody();\n    lastRngCell.set(editor.selection.getRng());\n    var pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n      'id': 'mcepastebin',\n      'class': 'mce-pastebin',\n      'contentEditable': true,\n      'data-mce-bogus': 'all',\n      'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n    }, pasteBinDefaultContent);\n\n    if (global$1.ie || global$1.gecko) {\n      dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n    }\n\n    dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n      e.stopPropagation();\n    });\n    delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n    pasteBinElm.focus();\n    editor.selection.select(pasteBinElm, true);\n  };\n\n  var remove = function (editor, lastRngCell) {\n    if (getEl(editor)) {\n      var pasteBinClone = void 0;\n      var lastRng = lastRngCell.get();\n\n      while (pasteBinClone = editor.dom.get('mcepastebin')) {\n        editor.dom.remove(pasteBinClone);\n        editor.dom.unbind(pasteBinClone);\n      }\n\n      if (lastRng) {\n        editor.selection.setRng(lastRng);\n      }\n    }\n\n    lastRngCell.set(null);\n  };\n\n  var getEl = function (editor) {\n    return editor.dom.get('mcepastebin');\n  };\n\n  var getHtml = function (editor) {\n    var copyAndRemove = function (toElm, fromElm) {\n      toElm.appendChild(fromElm);\n      editor.dom.remove(fromElm, true);\n    };\n\n    var pasteBinClones = global$6.grep(getPasteBinParent(editor).childNodes, function (elm) {\n      return elm.id === 'mcepastebin';\n    });\n    var pasteBinElm = pasteBinClones.shift();\n    global$6.each(pasteBinClones, function (pasteBinClone) {\n      copyAndRemove(pasteBinElm, pasteBinClone);\n    });\n    var dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n\n    for (var i = dirtyWrappers.length - 1; i >= 0; i--) {\n      var cleanWrapper = editor.dom.create('div');\n      pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n      copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n    }\n\n    return pasteBinElm ? pasteBinElm.innerHTML : '';\n  };\n\n  var getLastRng = function (lastRng) {\n    return lastRng.get();\n  };\n\n  var isDefaultContent = function (pasteBinDefaultContent, content) {\n    return content === pasteBinDefaultContent;\n  };\n\n  var isPasteBin = function (elm) {\n    return elm && elm.id === 'mcepastebin';\n  };\n\n  var isDefault = function (editor, pasteBinDefaultContent) {\n    var pasteBinElm = getEl(editor);\n    return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n  };\n\n  var PasteBin = function (editor) {\n    var lastRng = Cell(null);\n    var pasteBinDefaultContent = '%MCEPASTEBIN%';\n    return {\n      create: function () {\n        return create(editor, lastRng, pasteBinDefaultContent);\n      },\n      remove: function () {\n        return remove(editor, lastRng);\n      },\n      getEl: function () {\n        return getEl(editor);\n      },\n      getHtml: function () {\n        return getHtml(editor);\n      },\n      getLastRng: function () {\n        return getLastRng(lastRng);\n      },\n      isDefault: function () {\n        return isDefault(editor, pasteBinDefaultContent);\n      },\n      isDefaultContent: function (content) {\n        return isDefaultContent(pasteBinDefaultContent, content);\n      }\n    };\n  };\n\n  var Clipboard = function (editor, pasteFormat) {\n    var pasteBin = PasteBin(editor);\n    editor.on('PreInit', function () {\n      return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n    });\n    return {\n      pasteFormat: pasteFormat,\n      pasteHtml: function (html, internalFlag) {\n        return pasteHtml$1(editor, html, internalFlag);\n      },\n      pasteText: function (text) {\n        return pasteText(editor, text);\n      },\n      pasteImageData: function (e, rng) {\n        return pasteImageData(editor, e, rng);\n      },\n      getDataTransferItems: getDataTransferItems,\n      hasHtmlOrText: hasHtmlOrText,\n      hasContentType: hasContentType\n    };\n  };\n\n  var togglePlainTextPaste = function (editor, clipboard) {\n    if (clipboard.pasteFormat.get() === 'text') {\n      clipboard.pasteFormat.set('html');\n      firePastePlainTextToggle(editor, false);\n    } else {\n      clipboard.pasteFormat.set('text');\n      firePastePlainTextToggle(editor, true);\n    }\n\n    editor.focus();\n  };\n\n  var register = function (editor, clipboard) {\n    editor.addCommand('mceTogglePlainTextPaste', function () {\n      togglePlainTextPaste(editor, clipboard);\n    });\n    editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n      if (value.content) {\n        clipboard.pasteHtml(value.content, value.internal);\n      }\n\n      if (value.text) {\n        clipboard.pasteText(value.text);\n      }\n    });\n  };\n\n  var hasWorkingClipboardApi = function (clipboardData) {\n    return global$1.iOS === false && typeof (clipboardData === null || clipboardData === void 0 ? void 0 : clipboardData.setData) === 'function';\n  };\n\n  var setHtml5Clipboard = function (clipboardData, html, text) {\n    if (hasWorkingClipboardApi(clipboardData)) {\n      try {\n        clipboardData.clearData();\n        clipboardData.setData('text/html', html);\n        clipboardData.setData('text/plain', text);\n        clipboardData.setData(internalHtmlMime(), html);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n\n  var setClipboardData = function (evt, data, fallback, done) {\n    if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n      evt.preventDefault();\n      done();\n    } else {\n      fallback(data.html, done);\n    }\n  };\n\n  var fallback = function (editor) {\n    return function (html, done) {\n      var markedHtml = mark(html);\n      var outer = editor.dom.create('div', {\n        'contenteditable': 'false',\n        'data-mce-bogus': 'all'\n      });\n      var inner = editor.dom.create('div', {\n        contenteditable: 'true'\n      }, markedHtml);\n      editor.dom.setStyles(outer, {\n        position: 'fixed',\n        top: '0',\n        left: '-3000px',\n        width: '1000px',\n        overflow: 'hidden'\n      });\n      outer.appendChild(inner);\n      editor.dom.add(editor.getBody(), outer);\n      var range = editor.selection.getRng();\n      inner.focus();\n      var offscreenRange = editor.dom.createRng();\n      offscreenRange.selectNodeContents(inner);\n      editor.selection.setRng(offscreenRange);\n      global$2.setTimeout(function () {\n        editor.selection.setRng(range);\n        outer.parentNode.removeChild(outer);\n        done();\n      }, 0);\n    };\n  };\n\n  var getData = function (editor) {\n    return {\n      html: editor.selection.getContent({\n        contextual: true\n      }),\n      text: editor.selection.getContent({\n        format: 'text'\n      })\n    };\n  };\n\n  var isTableSelection = function (editor) {\n    return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n  };\n\n  var hasSelectedContent = function (editor) {\n    return !editor.selection.isCollapsed() || isTableSelection(editor);\n  };\n\n  var cut = function (editor) {\n    return function (evt) {\n      if (hasSelectedContent(editor)) {\n        setClipboardData(evt, getData(editor), fallback(editor), function () {\n          if (global$1.browser.isChrome()) {\n            var rng_1 = editor.selection.getRng();\n            global$2.setEditorTimeout(editor, function () {\n              editor.selection.setRng(rng_1);\n              editor.execCommand('Delete');\n            }, 0);\n          } else {\n            editor.execCommand('Delete');\n          }\n        });\n      }\n    };\n  };\n\n  var copy = function (editor) {\n    return function (evt) {\n      if (hasSelectedContent(editor)) {\n        setClipboardData(evt, getData(editor), fallback(editor), function () {});\n      }\n    };\n  };\n\n  var register$1 = function (editor) {\n    editor.on('cut', cut(editor));\n    editor.on('copy', copy(editor));\n  };\n\n  var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n  var getCaretRangeFromEvent = function (editor, e) {\n    return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n  };\n\n  var isPlainTextFileUrl = function (content) {\n    var plainTextContent = content['text/plain'];\n    return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n  };\n\n  var setFocusedRange = function (editor, rng) {\n    editor.focus();\n    editor.selection.setRng(rng);\n  };\n\n  var setup = function (editor, clipboard, draggingInternallyState) {\n    if (shouldBlockDrop(editor)) {\n      editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n    }\n\n    if (!shouldPasteDataImages(editor)) {\n      editor.on('drop', function (e) {\n        var dataTransfer = e.dataTransfer;\n\n        if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n          e.preventDefault();\n        }\n      });\n    }\n\n    editor.on('drop', function (e) {\n      var rng = getCaretRangeFromEvent(editor, e);\n\n      if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n        return;\n      }\n\n      var dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n      var internal = clipboard.hasContentType(dropContent, internalHtmlMime());\n\n      if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n        return;\n      }\n\n      if (rng && shouldFilterDrop(editor)) {\n        var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n\n        if (content_1) {\n          e.preventDefault();\n          global$2.setEditorTimeout(editor, function () {\n            editor.undoManager.transact(function () {\n              if (dropContent['mce-internal']) {\n                editor.execCommand('Delete');\n              }\n\n              setFocusedRange(editor, rng);\n              content_1 = trimHtml(content_1);\n\n              if (!dropContent['text/html']) {\n                clipboard.pasteText(content_1);\n              } else {\n                clipboard.pasteHtml(content_1, internal);\n              }\n            });\n          });\n        }\n      }\n    });\n    editor.on('dragstart', function (_e) {\n      draggingInternallyState.set(true);\n    });\n    editor.on('dragover dragend', function (e) {\n      if (shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n        e.preventDefault();\n        setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n      }\n\n      if (e.type === 'dragend') {\n        draggingInternallyState.set(false);\n      }\n    });\n  };\n\n  var setup$1 = function (editor) {\n    var plugin = editor.plugins.paste;\n    var preProcess = getPreProcess(editor);\n\n    if (preProcess) {\n      editor.on('PastePreProcess', function (e) {\n        preProcess.call(plugin, plugin, e);\n      });\n    }\n\n    var postProcess = getPostProcess(editor);\n\n    if (postProcess) {\n      editor.on('PastePostProcess', function (e) {\n        postProcess.call(plugin, plugin, e);\n      });\n    }\n  };\n\n  function addPreProcessFilter(editor, filterFunc) {\n    editor.on('PastePreProcess', function (e) {\n      e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n    });\n  }\n\n  function addPostProcessFilter(editor, filterFunc) {\n    editor.on('PastePostProcess', function (e) {\n      filterFunc(editor, e.node);\n    });\n  }\n\n  function removeExplorerBrElementsAfterBlocks(editor, html) {\n    if (!isWordContent(html)) {\n      return html;\n    }\n\n    var blockElements = [];\n    global$6.each(editor.schema.getBlockElements(), function (block, blockName) {\n      blockElements.push(blockName);\n    });\n    var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n    html = filter$1(html, [[explorerBlocksRegExp, '$1']]);\n    html = filter$1(html, [[/<br><br>/g, '<BR><BR>'], [/<br>/g, ' '], [/<BR><BR>/g, '<br>']]);\n    return html;\n  }\n\n  function removeWebKitStyles(editor, content, internal, isWordHtml) {\n    if (isWordHtml || internal) {\n      return content;\n    }\n\n    var webKitStylesSetting = getWebkitStyles(editor);\n    var webKitStyles;\n\n    if (shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n      return content;\n    }\n\n    if (webKitStylesSetting) {\n      webKitStyles = webKitStylesSetting.split(/[, ]/);\n    }\n\n    if (webKitStyles) {\n      var dom_1 = editor.dom,\n          node_1 = editor.selection.getNode();\n      content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n        var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n        var outputStyles = {};\n\n        if (webKitStyles === 'none') {\n          return before + after;\n        }\n\n        for (var i = 0; i < webKitStyles.length; i++) {\n          var inputValue = inputStyles[webKitStyles[i]],\n              currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n\n          if (/color/.test(webKitStyles[i])) {\n            inputValue = dom_1.toHex(inputValue);\n            currentValue = dom_1.toHex(currentValue);\n          }\n\n          if (currentValue !== inputValue) {\n            outputStyles[webKitStyles[i]] = inputValue;\n          }\n        }\n\n        outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n\n        if (outputStyles) {\n          return before + ' style=\"' + outputStyles + '\"' + after;\n        }\n\n        return before + after;\n      });\n    } else {\n      content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n    }\n\n    content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n      return before + ' style=\"' + value + '\"' + after;\n    });\n    return content;\n  }\n\n  function removeUnderlineAndFontInAnchor(editor, root) {\n    editor.$('a', root).find('font,u').each(function (i, node) {\n      editor.dom.remove(node, true);\n    });\n  }\n\n  var setup$2 = function (editor) {\n    if (global$1.webkit) {\n      addPreProcessFilter(editor, removeWebKitStyles);\n    }\n\n    if (global$1.ie) {\n      addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n      addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n    }\n  };\n\n  var makeSetupHandler = function (editor, clipboard) {\n    return function (api) {\n      api.setActive(clipboard.pasteFormat.get() === 'text');\n\n      var pastePlainTextToggleHandler = function (e) {\n        return api.setActive(e.state);\n      };\n\n      editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n      return function () {\n        return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n      };\n    };\n  };\n\n  var register$2 = function (editor, clipboard) {\n    editor.ui.registry.addToggleButton('pastetext', {\n      active: false,\n      icon: 'paste-text',\n      tooltip: 'Paste as text',\n      onAction: function () {\n        return editor.execCommand('mceTogglePlainTextPaste');\n      },\n      onSetup: makeSetupHandler(editor, clipboard)\n    });\n    editor.ui.registry.addToggleMenuItem('pastetext', {\n      text: 'Paste as text',\n      icon: 'paste-text',\n      onAction: function () {\n        return editor.execCommand('mceTogglePlainTextPaste');\n      },\n      onSetup: makeSetupHandler(editor, clipboard)\n    });\n  };\n\n  function Plugin() {\n    global.add('paste', function (editor) {\n      if (hasProPlugin(editor) === false) {\n        var draggingInternallyState = Cell(false);\n        var pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n        var clipboard = Clipboard(editor, pasteFormat);\n        var quirks = setup$2(editor);\n        register$2(editor, clipboard);\n        register(editor, clipboard);\n        setup$1(editor);\n        register$1(editor);\n        setup(editor, clipboard, draggingInternallyState);\n        return get(clipboard, quirks);\n      }\n    });\n  }\n\n  Plugin();\n})();","map":{"version":3,"sources":["/home/dani/Escritorio/Projects/blog-react/frontend-blog/node_modules/tinymce/plugins/paste/plugin.js"],"names":["Cell","initial","value","get","set","v","global","tinymce","util","Tools","resolve","hasProPlugin","editor","hasPlugin","window","console","log","clipboard","quirks","noop","constant","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","me","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","f","s","elementEq","b","from","Optional","isSimpleType","type","isFunction","nativeSlice","Array","prototype","slice","xs","len","length","r","i","x","pred","push","foldl","acc","from$1","subject","clear","isSet","on","global$1","global$2","global$3","global$4","firePastePreProcess","html","internal","isWordHtml","fire","content","wordContent","firePastePostProcess","node","firePastePlainTextToggle","state","firePaste","ieFake","shouldBlockDrop","getParam","shouldPasteDataImages","shouldFilterDrop","getPreProcess","getPostProcess","getWebkitStyles","shouldRemoveWebKitStyles","shouldMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getRetainStyleProps","getWordValidElements","defaultValidElements","shouldConvertWordFakeLists","shouldUseDefaultFilters","getValidate","getAllowHtmlDataUrls","getPasteDataImages","getImagesDataImgFilter","getImagesReuseFilename","getForcedRootBlock","getForcedRootBlockAttrs","getTabSpaces","internalMimeType","internalMark","mark","unmark","replace","isMarked","indexOf","internalHtmlMime","global$5","global$6","isPlainText","text","test","toBRs","openContainer","rootTag","rootAttrs","key","attrs","tag","hasOwnProperty","encodeAllRaw","join","toBlockElements","blocks","split","tagOpen","tagClose","paragraphs","p","stitch","convert","global$7","global$8","nbsp","global$9","global$a","filter$1","items","constructor","RegExp","innerText","schema","domParser","shortEndedElements","getShortEndedElements","ignoreElements","makeMap","blockElements","getBlockElements","walk","name","currentNode","shortEnded","firstChild","next","parse","trimHtml","trimSpaces","all","s1","s2","createIdGenerator","prefix","count","isWordContent","isNumericList","found","patterns","pattern","isBulletList","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","getText","txt","trimListStart","regExp","removeIgnoredNodes","_listIgnore","remove","convertParagraphToLi","paragraphNode","listName","start","level","_listLevel","parent","attr","wrap","append","lastChild","elements","child","nodeText","matches","exec","parseInt","filterStyles","validStyles","styleValue","outputStyles","styles","dom","parseStyle","serializeStyle","filterWordContent","retainStyleProperties","str","spaces","Math","floor","validElements","valid_elements","valid_children","rule","attributes","class","attributesOrder","style","addAttributeFilter","nodes","unwrap","className","addNodeFilter","href","rootNode","validate","serialize","preProcess","preProcess$1","parser","fragment","forced_root_block","isRootContent","processResult","cancelled","postProcessFilter","tempBody","create","postProcessArgs","innerHTML","isDefaultPrevented","filterContent","preProcessArgs","filteredContent","hasEventListeners","process","pasteHtml","insertContent","merge","paste","isAbsoluteUrl","url","isImageUrl","createImage","pasteHtmlFn","undoManager","extra","createLink","execCommand","linkSelection","selection","isCollapsed","insertImage","smartInsertContent","action","pasteAsText","repeat","isCollapsibleWhitespace","c","isNewLineChar","isNewline","idx","normalizeWhitespace","tabSpace","normalizedText","result","pcIsSpace","doPaste","args","pasteHtml$1","internalFlag","pasteText","encodedText","encode","getDataTransferItems","dataTransfer","mceInternalUrlPrefix","getData","legacyText","types","contentType","ex","getClipboardContent","clipboardEvent","clipboardData","getDoc","hasContentType","clipboardContent","mimeType","hasHtmlOrText","parseDataUri","uri","data","decodeURIComponent","isValidDataUriImage","imgElm","extractFilename","m","match","uniqueId","pasteImage","imageItem","_a","base64","blob","img","Image","src","blobCache","editorUpload","blobInfo","existingBlobInfo","getByData","add","blobUri","isClipboardEvent","event","readBlobsAsDataUris","item","getAsFile","reader","FileReader","onload","readAsDataURL","getImagesFromDataTransfer","files","images","file","pasteImageData","e","rng","preventDefault","then","blobResults","setRng","isBrokenAndroidClipboardEvent","navigator","userAgent","isKeyboardPasteEvent","metaKeyPressed","keyCode","shiftKey","registerEventHandlers","pasteBin","pasteFormat","keyboardPasteEvent","keyboardPastePlainTextState","removePasteBinOnKeyUp","webkit","stopImmediatePropagation","setTimeout","ie","once","off","insertClipboardContent","isKeyBoardPaste","plainTextMode","getHtml","isDefaultContent","isPlainTextHtml","isImage","windowManager","alert","getLastRng","getRng","getEl","stopPropagation","setEditorTimeout","registerEventsAndFilters","isPasteInsert","transparentSrc","isWebKitFakeUrl","isDataUri","getPasteBinParent","inline","document","body","getBody","isExternalPasteBin","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","_e","isDefault","lastRngCell","gecko","setStyle","getStyle","focus","select","pasteBinClone","lastRng","unbind","copyAndRemove","toElm","fromElm","appendChild","pasteBinClones","grep","childNodes","elm","shift","dirtyWrappers","cleanWrapper","insertBefore","isPasteBin","PasteBin","Clipboard","togglePlainTextPaste","register","addCommand","ui","hasWorkingClipboardApi","iOS","setData","setHtml5Clipboard","clearData","setClipboardData","evt","fallback","done","markedHtml","outer","inner","contenteditable","setStyles","position","top","left","width","overflow","range","offscreenRange","createRng","selectNodeContents","parentNode","removeChild","getContent","contextual","format","isTableSelection","getParent","getStart","hasSelectedContent","cut","browser","isChrome","rng_1","copy","register$1","global$b","getCaretRangeFromEvent","getCaretRangeFromPoint","clientX","clientY","isPlainTextFileUrl","plainTextContent","setFocusedRange","setup","draggingInternallyState","dropContent","content_1","transact","setup$1","plugin","plugins","postProcess","addPreProcessFilter","filterFunc","addPostProcessFilter","removeExplorerBrElementsAfterBlocks","block","blockName","explorerBlocksRegExp","removeWebKitStyles","webKitStylesSetting","webKitStyles","dom_1","node_1","getNode","before","after","inputStyles","decode","inputValue","currentValue","toHex","removeUnderlineAndFontInAnchor","root","$","find","setup$2","makeSetupHandler","api","setActive","pastePlainTextToggleHandler","register$2","registry","addToggleButton","active","icon","tooltip","onAction","onSetup","addToggleMenuItem","Plugin"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.5.1 (2020-10-01)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (editor.hasPlugin('powerpaste', true)) {\n        if (typeof window.console !== 'undefined' && window.console.log) {\n          window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isFunction = isSimpleType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var value = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var getValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var getAllowHtmlDataUrls = function (editor) {\n      return editor.getParam('allow_html_data_urls', false, 'boolean');\n    };\n    var getPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false, 'boolean');\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter');\n    };\n    var getImagesReuseFilename = function (editor) {\n      return editor.getParam('images_reuse_filename');\n    };\n    var getForcedRootBlock = function (editor) {\n      return editor.getParam('forced_root_block');\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs');\n    };\n    var getTabSpaces = function (editor) {\n      return editor.getParam('paste_tab_spaces', 4, 'number');\n    };\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var internalHtmlMime = function () {\n      return internalMimeType;\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$5.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$6.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$6.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var nbsp = '\\xA0';\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    function filter$1(content, items) {\n      global$6.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$a();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$6.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return nbsp;\n      }\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found;\n      var patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$6.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$9(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$6.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$9('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$9('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var validStyles;\n      var retainStyleProperties = getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$6.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = filter$1(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          nbsp\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join(nbsp) : '';\n          }\n        ]\n      ]);\n      var validElements = getWordValidElements(editor);\n      var schema = global$a({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$6.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$8({ validate: getValidate(editor) }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n\n    var preProcess$1 = function (editor, html) {\n      var parser = global$7({}, editor.schema);\n      parser.addNodeFilter('meta', function (nodes) {\n        global$6.each(nodes, function (node) {\n          node.remove();\n        });\n      });\n      var fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return global$8({ validate: getValidate(editor) }, editor.schema).serialize(fragment);\n    };\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = firePastePreProcess(editor, content, internal, isWordHtml);\n      var filteredContent = preProcess$1(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = isWordContent(html);\n      var content = isWordHtml ? preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(html, {\n        merge: shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$6.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html, pasteAsText) {\n      if (pasteAsText || isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n\n    var repeat = function (s, count) {\n      return count <= 0 ? '' : new Array(count + 1).join(s);\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var isNewLineChar = function (c) {\n      return c === '\\n' || c === '\\r';\n    };\n    var isNewline = function (text, idx) {\n      return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    };\n    var normalizeWhitespace = function (editor, text) {\n      var tabSpace = repeat(' ', getTabSpaces(editor));\n      var normalizedText = text.replace(/\\t/g, tabSpace);\n      var result = foldl(normalizedText, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === nbsp) {\n          if (acc.pcIsSpace || acc.str === '' || acc.str.length === normalizedText.length - 1 || isNewline(normalizedText, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    var doPaste = function (editor, content, internal, pasteAsText) {\n      var args = process(editor, content, internal);\n      if (args.cancelled === false) {\n        insertContent(editor, args.content, pasteAsText);\n      }\n    };\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : isMarked(html);\n      doPaste(editor, unmark(html), internal, false);\n    };\n    var pasteText = function (editor, text) {\n      var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      var normalizedText = normalizeWhitespace(editor, encodedText);\n      var html = convert(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n      doPaste(editor, html, false, true);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      return getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n      if (matches) {\n        return {\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        };\n      } else {\n        return {\n          type: null,\n          data: null\n        };\n      }\n    };\n    var isValidDataUriImage = function (editor, imgElm) {\n      var filter = getImagesDataImgFilter(editor);\n      return filter ? filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var _a = parseDataUri(imageItem.uri), base64 = _a.data, type = _a.type;\n      var id = uniqueId();\n      var name = getImagesReuseFilename(editor) && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0;\n        var existingBlobInfo = blobCache.getByData(base64, type);\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return global$3.all(map(items, function (item) {\n        return new global$3(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      }));\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (getPasteDataImages(editor) && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).then(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$4.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$1.webkit && navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$1.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = trimHtml(content);\n        pasteBin.remove();\n        var isPlainTextHtml = internal === false && isPlainText(content);\n        var isImage = isImageUrl(content);\n        if (!content.length || isPlainTextHtml && !isImage) {\n          plainTextMode = true;\n        }\n        if (plainTextMode || isImage) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$1.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$2.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$1.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!getPasteDataImages(editor) && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attr('src');\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!getAllowHtmlDataUrls(editor) && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$1.ie && editor.inline ? document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (_e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      lastRngCell.set(editor.selection.getRng());\n      var pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$1.ie || global$1.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      var pasteBinClones = global$6.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      var pasteBinElm = pasteBinClones.shift();\n      global$6.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      var dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (var i = dirtyWrappers.length - 1; i >= 0; i--) {\n        var cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('PreInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var togglePlainTextPaste = function (editor, clipboard) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n\n    var register = function (editor, clipboard) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        togglePlainTextPaste(editor, clipboard);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$1.iOS === false && typeof (clipboardData === null || clipboardData === void 0 ? void 0 : clipboardData.setData) === 'function';\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        global$2.setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            if (global$1.browser.isChrome()) {\n              var rng_1 = editor.selection.getRng();\n              global$2.setEditorTimeout(editor, function () {\n                editor.selection.setRng(rng_1);\n                editor.execCommand('Delete');\n              }, 0);\n            } else {\n              editor.execCommand('Delete');\n            }\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n          });\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        var dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$2.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (_e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$6.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = filter$1(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = filter$1(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = getWebkitStyles(editor);\n      var webKitStyles;\n      if (shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$1.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$1.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n\n    var makeSetupHandler = function (editor, clipboard) {\n      return function (api) {\n        api.setActive(clipboard.pasteFormat.get() === 'text');\n        var pastePlainTextToggleHandler = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n        return function () {\n          return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n        };\n      };\n    };\n    var register$2 = function (editor, clipboard) {\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        icon: 'paste-text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n    };\n\n    function Plugin () {\n      global.add('paste', function (editor) {\n        if (hasProPlugin(editor) === false) {\n          var draggingInternallyState = Cell(false);\n          var pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n          var clipboard = Clipboard(editor, pasteFormat);\n          var quirks = setup$2(editor);\n          register$2(editor, clipboard);\n          register(editor, clipboard);\n          setup$1(editor);\n          register$1(editor);\n          setup(editor, clipboard, draggingInternallyState);\n          return get(clipboard, quirks);\n        }\n      });\n    }\n\n    Plugin();\n\n}());\n"]},"metadata":{},"sourceType":"script"}