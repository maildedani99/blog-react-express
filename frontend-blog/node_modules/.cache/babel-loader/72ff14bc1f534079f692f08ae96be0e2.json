{"ast":null,"code":"import _defineProperty from\"/home/dani/Escritorio/Projects/blog-react-express/frontend-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/home/dani/Escritorio/Projects/blog-react-express/frontend-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect,useContext}from'react';import styles from'./post.module.css';import Logo from'../logo/logo';import ReactHtmlParser from'react-html-parser';import{Link}from'react-router-dom';import{LANDING,POSTUPDATEBYID}from'../../routes/routes';import{useHistory}from'react-router-dom';import swal from'sweetalert';import{PostsContext}from'../../contexts/postcontext';import Button from'../button/button';var Post=function Post(props){//const [post, setPost] = useState (['']);\nvar history=useHistory();var _useContext=useContext(PostsContext),posts=_useContext.posts,getPosts=_useContext.getPosts;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var id=props.id;var getPost=function getPost(){posts.map(function(item){if(item.id==id){setPost(item);}console.log(post);});};useEffect(function(){getPost();},[]);var deletePost=function deletePost(){var url=\"http://localhost/api/posts/delete/\".concat(id);var options={method:'DELETE',headers:new Headers()};fetch(url,options).then(function(response){if(response.status===200){console.log(response.status);swal({title:'El post se ha eliminado correctamente',icon:'info'});return response.json();}return Promise.reject(response.status);}).then(function(myJson){history.push(LANDING);}).catch(function(error){return console.log(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.__post_div,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.__post_header,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.__post_icon,children:/*#__PURE__*/_jsx(Logo,{width:\"150px\",icon:post.icon_id})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.__post_title_div,children:[/*#__PURE__*/_jsx(\"h2\",{children:post.title}),/*#__PURE__*/_jsx(\"h6\",{children:post.description})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.__post_content,children:/*#__PURE__*/_jsx(\"p\",{children:ReactHtmlParser(post.content)})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.__post_buttons,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.__post_button_div,children:/*#__PURE__*/_jsx(Link,{to:LANDING,children:/*#__PURE__*/_jsx(Button,{type:\"button\",value:\"Volver al listado\"})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.__post_button_div,children:/*#__PURE__*/_jsx(Button,{type:\"button\",value:\"Eliminar Post\",disabled:\"true\",onClick:deletePost})}),/*#__PURE__*/_jsx(\"div\",{className:styles.__post_button_div,children:/*#__PURE__*/_jsx(Link,{to:POSTUPDATEBYID+id,children:/*#__PURE__*/_jsx(Button,_defineProperty({type:\"button\",value:\"Modificar Post\",disabled:\"true\"},\"disabled\",true))})})]})]});};export default Post;","map":{"version":3,"sources":["/home/dani/Escritorio/Projects/blog-react-express/frontend-blog/src/components/post/post.js"],"names":["React","useState","useEffect","useContext","styles","Logo","ReactHtmlParser","Link","LANDING","POSTUPDATEBYID","useHistory","swal","PostsContext","Button","Post","props","history","posts","getPosts","post","setPost","id","getPost","map","item","console","log","deletePost","url","options","method","headers","Headers","fetch","then","response","status","title","icon","json","Promise","reject","myJson","push","catch","error","__post_div","__post_header","__post_icon","icon_id","__post_title_div","description","__post_content","content","__post_buttons","__post_button_div"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport styles from './post.module.css';\nimport Logo from '../logo/logo';\nimport ReactHtmlParser from 'react-html-parser';\nimport {Link} from 'react-router-dom';\nimport {LANDING, POSTUPDATEBYID} from '../../routes/routes';\nimport {useHistory} from 'react-router-dom';\nimport swal from 'sweetalert';\nimport {PostsContext} from '../../contexts/postcontext';\nimport Button from '../button/button';\n\nconst Post = (props) => {\n  //const [post, setPost] = useState (['']);\n  const history = useHistory();\n  const {posts, getPosts} = useContext(PostsContext);\n  const [post, setPost] = useState({});\n  const {id} = props;\n\n  const getPost = () => {\n    posts.map((item) => {\n      if (item.id == id) {\n        setPost(item);\n      }\n      console.log(post);\n    });\n  };\n  useEffect(() => {\n    getPost();\n  }, []);\n\n  const deletePost = () => {\n    const url = `http://localhost/api/posts/delete/${id}`;\n    const options = {\n      method: 'DELETE',\n      headers: new Headers(),\n    };\n    fetch(url, options)\n      .then((response) => {\n        if (response.status === 200) {\n          console.log(response.status);\n          swal({\n            title: 'El post se ha eliminado correctamente',\n            icon: 'info',\n          });\n\n          return response.json();\n        }\n        return Promise.reject(response.status);\n      })\n      .then(function (myJson) {\n        history.push(LANDING);\n      })\n      .catch((error) => console.log(error));\n  };\n\n  return (\n    <div className={styles.__post_div}>\n      <div className={styles.__post_header}>\n        <div className={styles.__post_icon}>\n          <Logo width=\"150px\" icon={post.icon_id} />\n        </div>\n        <div className={styles.__post_title_div}>\n          <h2>{post.title}</h2>\n          <h6>{post.description}</h6>\n        </div>\n      </div>\n      <div className={styles.__post_content}>\n        <p>{ReactHtmlParser(post.content)}</p>\n      </div>\n      <div className={styles.__post_buttons}>\n        <div className={styles.__post_button_div}>\n          <Link to={LANDING}>\n            <Button type=\"button\" value=\"Volver al listado\" />\n          </Link>\n        </div>\n        <div className={styles.__post_button_div}>\n          <Button\n            type=\"button\"\n            value=\"Eliminar Post\"\n            disabled=\"true\"\n            onClick={deletePost}\n          />\n        </div>\n        <div className={styles.__post_button_div}>\n          <Link to={POSTUPDATEBYID + id}>\n            <Button type=\"button\" value=\"Modificar Post\" disabled=\"true\" disabled/>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}