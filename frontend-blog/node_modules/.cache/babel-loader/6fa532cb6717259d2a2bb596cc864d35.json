{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/dani/Escritorio/Projects/blog-react/frontend-blog/src/pages/postupdateview/postUpdateview.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport Navbar from '../../components/navbar/navbar';\nimport styles from './postupdate.module.css';\nimport { Editor } from '@tinymce/tinymce-react';\nimport { useHistory } from 'react-router-dom';\nimport { useParams } from 'react-router';\nimport { LANDING } from '../../routes/routes';\nimport { PostsContext } from '../../contexts/postcontext';\nimport ReactHtmlParser from 'react-html-parser';\nimport swal from 'sweetalert';\n\nconst PostUpdate = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const {\n    icons,\n    getPost,\n    post\n  } = useContext(PostsContext);\n  const history = useHistory();\n  const [data, setData] = useState({});\n\n  const handleInputChange = event => {\n    setData({ ...data,\n      [event.target.name]: event.target.value\n    });\n    console.log(data);\n  };\n\n  const [wysiwyg, setWysiwyg] = useState(null);\n\n  const handleEditorChange = content => {\n    setWysiwyg(content);\n    console.log(content);\n  };\n\n  const handleSelectChange = event => {\n    setData({ ...data,\n      icon: event.target.value\n    });\n  };\n\n  getPost(id);\n\n  const submitForm = () => {\n    const url = `http://localhost/api/posts/update/${id}`;\n    const body = {\n      title: data.title,\n      icon_id: data.icon,\n      description: data.description,\n      content: wysiwyg\n    };\n    const options = {\n      method: 'put',\n      headers: new Headers({\n        'Content-type': 'application/json'\n      }),\n      mode: 'cors',\n      body: JSON.stringify(body)\n    };\n    fetch(url, options).then(response => {\n      if (response.status === 201 || response.status === 200) {\n        console.log(response.status);\n        swal('Enhorabuena', 'Post creado con exito', 'success');\n        history.push(LANDING);\n        return response.json();\n      } else {\n        return Promise.reject(response.status);\n      }\n    }).catch(error => console.log(error));\n  };\n\n  const initialData = () => {\n    setData({ ...data,\n      title: post.titleº,\n      icon_id: post.icon,\n      description: post.description,\n      content: post.content\n    });\n  };\n\n  useEffect(() => {\n    getPost(id);\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-muted mt-5\",\n      children: \"Modificar Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.__div_form,\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-control col-3 align-self-center\",\n        defaultValue: post.icon_id,\n        onChange: handleSelectChange,\n        children: icons.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          className: styles.__option,\n          value: item.id,\n          label: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control col-6 align-self-center mt-5\",\n        name: \"title\",\n        type: \"text\",\n        placeholder: \"title\",\n        onChange: handleInputChange,\n        defaultValue: post.title,\n        initialValue: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control col-6 align-self-center mt-5\",\n        name: \"description\",\n        type: \"text\",\n        placeholder: \"description\",\n        onChange: handleInputChange,\n        defaultValue: post.description,\n        initialValue: post.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-control col-6 align-self-center mt-5\",\n        children: /*#__PURE__*/_jsxDEV(Editor, {\n          initialValue: post.content,\n          apiKey: \"z3chpr7kq0azccojyrbp99s6bab52o2f3t26a7hg1ge0iy93\",\n          init: {\n            height: 500,\n            menubar: false,\n            plugins: ['advlist autolink lists link image charmap print preview anchor', 'searchreplace visualblocks code fullscreen', 'insertdatetime media table paste code help wordcount'],\n            toolbar: 'undo redo | formatselect | bold italic backcolor | \\\n             alignleft aligncenter alignright alignjustify | \\\n             bullist numlist outdent indent | removeformat | help'\n          },\n          value: wysiwyg,\n          onEditorChange: handleEditorChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"btn btn-success btn-lg col-2 my-5 align-self-center\",\n        name: \"button\",\n        type: \"button\",\n        value: \"Confirmar cambios\",\n        onClick: submitForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostUpdate, \"P077dr1TPXOEwWV1q9i/VnpwduA=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = PostUpdate;\nexport default PostUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostUpdate\");","map":{"version":3,"sources":["/home/dani/Escritorio/Projects/blog-react/frontend-blog/src/pages/postupdateview/postUpdateview.js"],"names":["React","useState","useEffect","useContext","Navbar","styles","Editor","useHistory","useParams","LANDING","PostsContext","ReactHtmlParser","swal","PostUpdate","id","icons","getPost","post","history","data","setData","handleInputChange","event","target","name","value","console","log","wysiwyg","setWysiwyg","handleEditorChange","content","handleSelectChange","icon","submitForm","url","body","title","icon_id","description","options","method","headers","Headers","mode","JSON","stringify","fetch","then","response","status","push","json","Promise","reject","catch","error","initialData","titleº","__div_form","map","item","__option","height","menubar","plugins","toolbar"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport Navbar from '../../components/navbar/navbar';\nimport styles from './postupdate.module.css';\nimport {Editor} from '@tinymce/tinymce-react';\nimport {useHistory} from 'react-router-dom';\nimport {useParams} from 'react-router';\nimport {LANDING} from '../../routes/routes';\nimport {PostsContext} from '../../contexts/postcontext';\nimport ReactHtmlParser from 'react-html-parser';\nimport swal from 'sweetalert';\n\nconst PostUpdate = () => {\n  const {id} = useParams ();\n  const {icons, getPost, post} = useContext (PostsContext);\n  const history = useHistory ();\n  const [data, setData] = useState ({});\n\n  const handleInputChange = event => {\n    setData ({\n      ...data,\n      [event.target.name]: event.target.value,\n    });\n    console.log (data);\n  };\n\n  const [wysiwyg, setWysiwyg] = useState (null);\n  const handleEditorChange = content => {\n    setWysiwyg (content);\n    console.log (content);\n  };\n\n  const handleSelectChange = event => {\n    setData ({\n      ...data,\n      icon: event.target.value,\n    });\n  };\n\n  getPost (id);\n\n  const submitForm = () => {\n    const url = `http://localhost/api/posts/update/${id}`;\n    const body = {\n      title: data.title,\n      icon_id: data.icon,\n      description: data.description,\n      content: wysiwyg,\n    };\n    const options = {\n      method: 'put',\n      headers: new Headers ({\n        'Content-type': 'application/json',\n      }),\n      mode: 'cors',\n      body: JSON.stringify (body),\n    };\n    fetch (url, options)\n      .then (response => {\n        if (response.status === 201 || response.status === 200) {\n          console.log (response.status);\n          swal ('Enhorabuena', 'Post creado con exito', 'success');\n          history.push (LANDING);\n          return response.json ();\n        } else {\n          return Promise.reject (response.status);\n        }\n      })\n      .catch (error => console.log (error));\n  };\n    \n    const initialData = () => {\n        setData({\n            ...data,\n    title: post.titleº,\n    icon_id: post.icon,\n    description: post.description,\n    content: post.content,\n        })\n    }\n\n  useEffect (\n    () => {\n      getPost (id);\n    },\n    [id]\n  );\n\n  return (\n    <div>\n      <h1 className=\"text-muted mt-5\">Modificar Post</h1>\n      <div className={styles.__div_form}>\n        <select\n          className=\"form-control col-3 align-self-center\"\n          defaultValue={post.icon_id}\n          onChange={handleSelectChange}\n        >\n\n          {icons.map (item => (\n            <option\n              className={styles.__option}\n              value={item.id}\n              label={item.name}\n            />\n          ))}\n        </select>\n\n        <input\n          className=\"form-control col-6 align-self-center mt-5\"\n          name=\"title\"\n          type=\"text\"\n          placeholder=\"title\"\n          onChange={handleInputChange}\n                  defaultValue={post.title}\n                  initialValue={post.title}\n        />\n        <input\n          className=\"form-control col-6 align-self-center mt-5\"\n          name=\"description\"\n          type=\"text\"\n          placeholder=\"description\"\n          onChange={handleInputChange}\n                  defaultValue={post.description}\n                  initialValue={post.description}\n        />\n        <div className=\"form-control col-6 align-self-center mt-5\">\n          <Editor\n            initialValue={post.content}\n            apiKey=\"z3chpr7kq0azccojyrbp99s6bab52o2f3t26a7hg1ge0iy93\"\n            init={{\n              height: 500,\n              menubar: false,\n              plugins: [\n                'advlist autolink lists link image charmap print preview anchor',\n                'searchreplace visualblocks code fullscreen',\n                'insertdatetime media table paste code help wordcount',\n              ],\n              toolbar: 'undo redo | formatselect | bold italic backcolor | \\\n             alignleft aligncenter alignright alignjustify | \\\n             bullist numlist outdent indent | removeformat | help',\n            }}\n            value={wysiwyg}\n            onEditorChange={handleEditorChange}\n          />\n        </div>\n\n        <input\n          className=\"btn btn-success btn-lg col-2 my-5 align-self-center\"\n          name=\"button\"\n          type=\"button\"\n          value=\"Confirmar cambios\"\n          onClick={submitForm}\n        />\n      </div>\n    </div>\n  );\n};\nexport default PostUpdate;\n"]},"metadata":{},"sourceType":"module"}